<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<title>Dieta Vitória | Avaliação Gratuita</title>

    <!-- SEO Meta Tags -->
<meta name="description" content="Dieta Vitória Clínica de Nutrição e Reeducação Alimentar">
<meta name="keywords" content="emagrecimento, Dieta Vitória, reeducação alimentar, nutricionista, psicóloga, avaliação gratuita, consulta online, bioimpedância, terapia em grupo, reunião de grupo, resultados, peso saudável, previsão de emagrecimento, clínica, sem passar fome, receitas, alimentação saudável, terapia, meta de peso, consulta mensal, cardápio personalizado, Reeducação Alimentar, Terapia em Grupo, Cardápio Estratégico">
<meta name="author" content="Xava">

    <!-- Viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon and Touch Icons -->
<link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
<link rel="manifest" href="assets/favicon/site.webmanifest">
<link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#6366f1">
<link rel="shortcut icon" href="assets/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#080032">
<meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- Main Theme Styles + Bootstrap -->
<link rel="stylesheet" media="screen" id="theme-style" href="assets/css/theme.min.css">
<link rel="stylesheet" media="screen" href="assets/vendor/swiper/swiper-bundle.min.css"/>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>


<style>
    
.custom-append {
  width: 2rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

    .card-feature {
        box-shadow: 0 2px 6px 0 #ec2d5364;
        position: relative;
        margin: 20px;
        border-radius: 0.5rem;
    }
    
    .svg-oferecemos {
        fill: #ec2d53bb;
        margin-top:10px;
        width: 30px;
        height: 30px;
        opacity: 0.9;
    }

.page-wrapper {
    display: flex;
    position: relative; 
    overflow: hidden;
    height: 100%;
    box-sizing: border-box;
}

#slide_1, #slide_2 {
    position: absolute;
    top: 0;
    right: 0;
    transition: all 0.5s ease-in-out;
    width: 100%;
}

.slide-out {
    transform: translateX(-100%);
}

.slide-in {
    transform: translateX(100%);
}

.active {
    transform: translateX(0);
}

</style>

</head>
<body>
<main class="page-wrapper">

<section id="slide_1" class="active">
    <div class="m-3 bg-white card-feature d-flex flex-column align-items-center pb-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="svg-oferecemos" viewBox="0 0 24 24" ><path d="M5 3H3v18h18v-2H5z"></path><path d="M13 12.586 8.707 8.293 7.293 9.707 13 15.414l3-3 4.293 4.293 1.414-1.414L16 9.586z"></path></svg>
            <p class="fs-4 m-0 py-2 text-center text-dark"><strong>Avaliação</strong></p>

                <div class="row justify-content-center mx-2">

                    <div class="col">
                        <div class="mb-2 text-center">
                            <label for="peso" class="form-label">Peso</label>
                            <div class="input-group has-validation">
                                <input type="number" inputmode="numeric" class="form-control" id="peso" name="peso" step="1" pattern="\d+" required min="40" max="200">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col">
                        <div class="mb-2 text-center">
                            <label for="altura" class="form-label">Altura</label>
                            <div class="input-group has-validation">
                                <input type="number" inputmode="numeric" class="form-control" id="altura" name="altura" step="0.01" required>
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                    </div>                                 
                    
                </div>
                
                <div class="mb-3">
                    <div class="text-center">
                        <label for="data_nascimento" class="form-label">Data de Nascimento</label>
                        <input type="text" inputmode="numeric" class="form-control" name="data_nascimento" id="data_nascimento" required>
                        <div class="invalid-feedback"></div>
                    </div>
                </div>


                <div class="mb-3">
                    <label for="sexo" class="form-label">Sexo</label>
                        <select class="form-select" id="sexo">
                            <option value="" selected hidden>Escolha...</option>
                            <option value="f">Feminino</option>
                            <option value="m">Masculino</option>
                        </select>
                </div>
        </div>

        <div class="d-flex justify-content-center align-items-center">
            <button class="btn btn-primary disabled" id="calcular_button" target="_blank" rel="noopener">Calcular ➔</button>
        </div> 
</section>

<section id="slide_2" class="slide-in">
    <div class="my-3 bg-white card-feature d-flex flex-column align-items-center pb-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" viewBox="0 0 24 24" style="fill: #ec2d53bb;margin-top:5px;"><circle cx="12" cy="12" r="3"></circle><path d="M13 4.069V2h-2v2.069A8.008 8.008 0 0 0 4.069 11H2v2h2.069A8.007 8.007 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"></path></svg> <!--<i class="bx bx-target-lock text-primary pt-2 opacity-95" style="font-size: 45px;"></i>-->
        <p class="fs-4 m-0 py-2 text-center text-dark"><strong>Estimativa</strong></p>

            <div class="mb-3">
                <label for="peso" class="form-label">Email</label>
                <input type="email" inputmode="numeric" class="form-control" id="email">
            </div>

            <div class="mb-3">
                <label for="celular" class="form-label">Celular</label>
                <input type="text" inputmode="numeric" class="form-control" id="celular">
            </div>
            
            <div class="container">
                <div class="row">
                    <div class="col d-flex align-items-center flex-column">
                        <p class="fs-6 mb-2 mx-2 text-center text-dark">Meta</p> 
                        <div class="placeholder w-75 mb-3 d-flex align-items-center justify-content-center" id="meta_saudavel"></div>
                    </div>
                    <div class="col d-flex align-items-center flex-column">
                        <p class="fs-6 mb-2 mx-2 text-center text-dark" >Previsão</p> 
                        <div class="placeholder w-75 mb-3 d-flex align-items-center justify-content-center" id="estimativa"></div>
                    </div>                                       
                </div>
            </div>

        </div>

        <div class="d-flex justify-content-center align-items-center">
            <a href="https://sistema.emagrecimentosantos.com.br/facebook_conversions-master/redirect_pixel_lead.php" class="btn btn-primary disabled mb-3" target="_blank" rel="noopener">
              &nbsp;Agendar Consulta

              <svg xmlns="http://www.w3.org/2000/svg" class="ms-1" width="35" height="35"  viewBox="0 0 24 24" style="fill: rgb(255, 255, 255)"><path d="M21 20V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2zM9 18H7v-2h2v2zm0-4H7v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm2-5H5V7h14v2z"></path></svg>    
        </a>
            </div> 
</section>

          <div class="position-fixed bottom-0 end-0 m-2">
            <a href="https://sistema.emagrecimentosantos.com.br/facebook_conversions-master/redirect_pixel_lead.php">
              <button class="btn btn-primary btn-icon rounded-circle" type="button" role="button" id="whatsapp_button">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"></path></svg>
              </button>
            </a>
          </div>

          <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="confirmModalLabel">Está correto?</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p id="modalEmail"></p>
                  <p id="modalPhone"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Editar</button>
                  <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="avaliacao()">Confirmar</button>
                </div>
              </div>
            </div>
        </div>  
</main>
<script>

//FALTA: LIDAR COM CASOS DE PESSOAS MAGRAS
function avaliacao() {

const date = document.getElementById("data_nascimento").value;
const altura = document.getElementById("altura").value * 100;
const sexo = document.getElementById("sexo").value;
const peso = document.getElementById("peso").value;

if (!date || !altura || !sexo || !peso) {
    alert("Preencha todos os campos");
    return
}

const idade = calculateAge(date);
const imc = Math.round(peso / Math.pow(altura/100,2));
let minIMC, maxIMC, targetIMC, minBW, maxBW, targetBW;

if (idade < 60){
    if (sexo == 'm'){
        minIMC = 20.7;
        maxIMC = 26.4;
        targetIMC = 23.55;
    } else if (sexo == 'f'){
        minIMC = 19.1;
        maxIMC = 25.8;
        targetIMC = 22.45;
    }
} else if (idade >= 60){
    minIMC = 22;
    maxIMC = 27;
    targetIMC = 24.5;
}

//console.log(`minIMC: ${minIMC}, maxIMC: ${maxIMC}, targetIMC: ${targetIMC}`);

minBW = 2.2 * minIMC + 3.5 * minIMC * (altura / 100 - 1.5);
maxBW = 2.2 * maxIMC + 3.5 * maxIMC * (altura / 100 - 1.5);
targetBW = 2.2 * targetIMC + 3.5 * targetIMC * (altura / 100 - 1.5);

//console.log(`minBW: ${minBW}, maxBW: ${maxBW}, targetBW: ${targetBW}`);

let multiplicador_peso;
if(imc < 30){
    multiplicador_peso = 0.1;
} else if (imc >= 30 && imc <= 34.9){
    multiplicador_peso = 0.25;
} else if (imc >= 35 && imc <= 39.9){
    multiplicador_peso = 0.3;
} else if (imc >= 40){
    multiplicador_peso = 0.35;
}

//console.log(`multiplicador_peso: ${multiplicador_peso}`);

const adjBW = Math.round(targetBW + multiplicador_peso * (peso - targetBW));
const adjmaxBW = Math.round(maxBW + multiplicador_peso * (peso - maxBW));
const estimativa = calc_estimativa(idade, altura, sexo, peso, adjBW);

//console.log(`adjBW: ${adjBW}, adjmaxBW: ${adjmaxBW}, estimativa: ${estimativa}`);

const meta_elem = document.getElementById("meta_saudavel");
const estimativa_elem = document.getElementById("estimativa");

meta_elem.textContent = adjBW + " a " + adjmaxBW + " kg";
estimativa_elem.textContent = estimativa + " meses";

meta_elem.classList.remove('placeholder');
meta_elem.classList.remove('w-75');
estimativa_elem.classList.remove('placeholder');
estimativa_elem.classList.remove('w-75');
}


function calc_estimativa(idade, altura, sexo, peso, meta){

    let geb;

    if (idade >= 10 && idade <= 18){
        if (sexo == 'm'){
            geb = (0.113 * peso + 1.689) * 239;
        }
        else if (sexo == 'f'){
            geb = (0.063 * peso + 2.466) * 239;
        }
    }
    else if (idade >= 19 && idade <= 30){
        if (sexo == 'm'){
            geb = (0.056 * peso + 2.8) * 239;
        }
        else if (sexo == 'f'){
            geb = (0.048 * peso + 2.562) * 239;
        }
    }
    else if (idade >= 31 && idade <= 99){
        if (sexo == 'm'){
            geb = (0.046 * peso + 3.16) * 239;
        }
        else if (sexo == 'f'){
            geb = (0.048 * peso + 2.448) * 239;
        }
    }

geb = geb * (90 / 100);

    if(sexo=='f'){
        var baseline_ER = 430.29 - 12.86 * idade + 12.19 * altura + 4.066 * peso + 0.043 * Math.pow(peso,2); //Estimativa da necessidade de energia em mulheres
        if(baseline_ER<2346){
            var prev_mensal = -0.009239509 * idade - 0.001061759 * baseline_ER; //formula de estimativa para mulheres
            var erro = 0.70569311;
        }
        else{
            var prev_mensal = -0.001206311 * baseline_ER;  //formula de estimativa para mulheres
            var erro = 0.782154319;
        }
    }else if(sexo=='m'){
        var baseline_ER = 892.721 - 16.7 * idade + 1.29 * altura + 42.9 * peso - 0.11435 * Math.pow(peso,2); //Estimativa da necessidade de energia em homens
        var prev_mensal = -0.001382573 * baseline_ER; //formula de estimativa para homens
        var erro = 1.271735292;
    }

    const estimativa = Math.round(((meta - peso) / prev_mensal));
    const estimativa_min = Math.round(((meta - peso) / (prev_mensal - erro)));

    return (estimativa_min + " a " + estimativa);

}

function calculateAge(dateString) {
    const dateParts = dateString.split("/");
    const birthDate = new Date(+dateParts[2], dateParts[1] - 1, +dateParts[0]);
    const today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    const monthDifference = today.getMonth() - birthDate.getMonth();
    if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
}


</script>
</body>
<footer>

 <!-- Vendor Scripts -->
<script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

<script>

//js being js (just to remove an error without altering the whole file)
var SmoothScroll = function() {};

document.addEventListener("DOMContentLoaded", function(){

// Get the calculate button
var calcularButton = document.getElementById('calcular_button');

// Function to validate an input field
function validateInput(input) {
  var inputValue = input.value.trim();
  if (inputValue === "") {
    input.classList.remove("is-invalid");
    return false;
  }
  var isValid = validateFieldValue(input);
  input.classList.toggle("is-invalid", !isValid);
  return isValid;
}

// Function to validate the value of a field
function validateFieldValue(element) {
  if (element.id === 'sexo') {
    return element.value !== "";
  } else if (element.id === 'peso' || element.id === 'altura') {
    var value = parseFloat(element.value);
    if (element.id === 'peso') {
      return !isNaN(value) && value >= 40 && value <= 200;
    } else if (element.id === 'altura') {
      return !isNaN(value) && value >= 1.20 && value <= 2.30;
    }
  }
  return true;
}

// Function to check all fields
function checkFields() {
  var allInputsValid = ['peso', 'altura', 'data_nascimento', 'sexo'].every(id => validateInput(document.getElementById(id)));
  calcularButton.classList.toggle('disabled', !allInputsValid);
}

// Add event listeners for each input field
document.getElementById('peso').addEventListener('blur', function() {
  validateInput(this);
  checkFields();
});

document.getElementById('altura').addEventListener('blur', function() {
  validateInput(this);
  checkFields();
});

document.getElementById('data_nascimento').addEventListener('blur', function() {
  validateInput(this);
  checkFields();
});

document.getElementById('sexo').addEventListener('change', function() {
  validateInput(this);
  checkFields();
});

// Add event listener to the calculate button
document.getElementById('calcular_button').addEventListener('click', function() {
  var slide_1 = document.getElementById('slide_1');
  var slide_2 = document.getElementById('slide_2');
  var botao_zap = document.getElementById('whatsapp_button');
  var emailInput = document.getElementById('email');

  slide_1.classList.add('slide-out');
  slide_1.classList.remove('active');
  slide_2.classList.remove('slide-in');
  slide_2.classList.add('active');
  botao_zap.classList.add('d-none');

  emailInput.focus();
});

/*****    VALIDACOES      ******/

function validateEmailField() {
    var emailInput = document.getElementById('email');
    var email = emailInput.value;

    if (email === "" || validateEmail(email)) {
        emailInput.classList.remove("is-invalid");
        return true;
    } else {
        emailInput.classList.add("is-invalid");
        return false;
    }
}

function validateCelularField() {
    var celular = document.getElementById('celular').value;

    // This is based on the Brazilian celular number format "(##) ####-####"
    if (celular.length == 14) {
        return true;
    } else {
        return false;
    }
}

function checkFieldsSlide2() {
    var agendar_button = document.querySelector('#slide_2 .btn');

    var isEmailValid = validateEmailField();
    var isCelularValid = validateCelularField();

    if (isEmailValid && isCelularValid) {
        agendar_button.classList.remove("disabled");

        document.getElementById('modalEmail').innerText = document.getElementById('email').value;
        document.getElementById('modalPhone').innerText = document.getElementById('celular').value;
        $('#confirmModal').modal('show');
    } else {
        if (!agendar_button.classList.contains("disabled")) {
            agendar_button.classList.add("disabled");
        }
    }
}


function validateEmail(email) {
    var re = /^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;
    return re.test(email);
}

document.getElementById('email').addEventListener('blur', checkFieldsSlide2);
document.getElementById('celular').addEventListener('input', checkFieldsSlide2);

function formatDate(input) {
    var parts = input.split("/");
    var day = parseInt(parts[0]);
    var month = parseInt(parts[1]) - 1; // months are 0-based
    var year = parseInt(parts[2]);
    return new Date(year, month, day);
}

function validatePeso() {
    var peso = $("#peso").val();
    var pesoError = $("#peso").siblings(".invalid-feedback");

    if (peso && (peso < 40 || peso > 300)) {
        pesoError.text("Peso inválido.");
        $("#peso").addClass("is-invalid");
        return false;
    } else {
        pesoError.text("");
        $("#peso").removeClass("is-invalid");
        return true;
    }
}

function validateAltura() {
    var altura = $("#altura").val();
    var alturaError = $("#altura").siblings(".invalid-feedback");

    if (altura && (altura < 1.20 || altura > 2.30)) {
        alturaError.text("Altura inválida.");
        $("#altura").addClass("is-invalid");
        return false;
    } else {
        alturaError.text("");
        $("#altura").removeClass("is-invalid");
        return true;
    }
}

function validateDataNascimento() {
    var dataNascimento = $("#data_nascimento").val();
    var dataNascimentoError = $("#data_nascimento").siblings(".invalid-feedback");

    var dateParts = dataNascimento.split("/");
    var dateObject = new Date(+dateParts[2], dateParts[1] - 1, +dateParts[0]);
    var currentDate = new Date();
    var age = currentDate.getFullYear() - dateObject.getFullYear();

    if (dataNascimento && (isNaN(dateObject.getTime()) || dateObject > currentDate || age < 10 || age > 120)) {
        dataNascimentoError.text("Data de nascimento inválida.");
        $("#data_nascimento").addClass("is-invalid");
        return false;
    } else {
        dataNascimentoError.text("");
        $("#data_nascimento").removeClass("is-invalid");
        return true;
    }
}

$("#peso").on("blur", validatePeso);
$("#altura").mask("0.00").on("blur", validateAltura);
$("#data_nascimento").mask("00/00/0000").on("blur", validateDataNascimento);
$("#celular").mask("(00)00000-0000");

$("#email").on("blur", function() {
    var email = $(this).val();
    var re = /^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;
    if (!re.test(email)) {
            $("#email").focus();
    }
});

});

</script>

<!-- Main Theme Script -->
<script src="assets/js/theme.min.js"></script>

</footer>
</html>